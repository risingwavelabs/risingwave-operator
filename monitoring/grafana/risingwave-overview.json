{"__inputs":[],"__requires":[],"annotations":{"list":[]},"editable":true,"gnetId":null,"graphTooltip":0,"hideControls":false,"id":null,"links":[],"panels":[{"datasource":"default","fieldConfig":{"overrides":[{"matcher":{"id":"byName","options":"risingwave_component"},"properties":[{"id":"custom.filterable","value":true}]},{"matcher":{"id":"byName","options":"Value #C"},"properties":[{"id":"unit","value":"percentunit"},{"id":"custom.displayMode","value":"gradient-gauge"}]},{"matcher":{"id":"byName","options":"Value #M"},"properties":[{"id":"unit","value":"decbytes"}]}]},"gridPos":{"h":8,"w":24},"id":2,"options":{"footer":{"enablePagination":true}},"targets":[{"expr":"topk by (pod) (1, max by (pod, node) (kube_pod_info{node!=\"\", namespace=\"$namespace\"}))\n* on (pod) group_left (risingwave_component)\n\ttopk by (risingwave_component, pod) (\n\t\t1,\n\t\tmax by (risingwave_component, pod) (up{namespace=\"$namespace\", risingwave_name=\"risingwave-tpch-bench\"})\n\t)","format":"table","instant":true,"intervalFactor":2,"legendFormat":"","refId":"I"},{"expr":"sum by (pod) (\n    (\n        rate(process_cpu_seconds_total{namespace=\"$namespace\"}[$__rate_interval])\n      * on (namespace, pod) group_left (node)\n        topk by (namespace, pod) (1, max by (namespace, pod, node) (kube_pod_info{node!=\"\"}))\n    )\n  * on (namespace, pod) group_left ()\n    topk by (namespace, pod) (\n      1,\n      max by (namespace, risingwave_component, pod) (up{risingwave_name=\"$instance\"})\n    )\n)","format":"table","instant":true,"intervalFactor":2,"legendFormat":"","refId":"C"},{"expr":"avg by (pod) (\n    (\n        process_resident_memory_bytes{namespace=\"$namespace\"}\n      * on (namespace, pod) group_left (node)\n        topk by (namespace, pod) (1, max by (namespace, pod, node) (kube_pod_info{node!=\"\"}))\n    )\n  * on (namespace, pod) group_left ()\n    topk by (namespace, pod) (\n      1,\n      max by (namespace, risingwave_component, pod) (up{risingwave_name=~\"$instance\"})\n    )\n)","format":"table","instant":true,"intervalFactor":2,"legendFormat":"","refId":"M"}],"title":"Component Overview","transformations":[{"id":"seriesToColumns","options":{"byField":"pod"}},{"id":"sortBy","options":{"fields":{},"sort":[{"desc":true,"field":"risingwave_component"}]}},{"id":"filterFieldsByName","options":{"exclude":{"names":["Time","Value #I"]}}},{"id":"organize","options":{"indexByName":{"Value #C":3,"Value #M":4,"node":2,"pod":0,"risingwave_component":1},"renameByName":{"Value #C":"CPU","Value #M":"Mem","node":"Node","pod":"Pod","risingwave_component":"Component"}}}],"transparent":false,"type":"table"}],"refresh":"","rows":[{"collapse":true,"collapsed":true,"height":"300px","panels":[{"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineInterpolation":"linear","lineStyle":{"fill":"solid"},"lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[]},"unit":"percentunit"},"overrides":[]},"id":3,"links":[],"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom"},"tooltip":{"mode":"single","sort":"none"}},"span":[6],"targets":[{"expr":"avg by (risingwave_component) (\n    (\n        rate(process_cpu_seconds_total{namespace=\"$namespace\"}[$__rate_interval])\n      * on (namespace, pod) group_left (node)\n        topk by (namespace, pod) (1, max by (namespace, pod, node) (kube_pod_info{node!=\"\"}))\n    )\n  * on (namespace, pod) group_left ()\n    topk by (namespace, pod) (\n      1,\n      max by (namespace, risingwave_component, pod) (up{risingwave_name=\"$instance\"})\n    )\n)","format":"time_series","intervalFactor":2,"legendFormat":"{{ risingwave_component }}","refId":"A"}],"title":"Avg CPU (Component-Level)","type":"timeseries"},{"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineInterpolation":"linear","lineStyle":{"fill":"solid"},"lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[]},"unit":"decbytes"},"overrides":[]},"id":4,"links":[],"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom"},"tooltip":{"mode":"single","sort":"none"}},"span":[6],"targets":[{"expr":"avg by (risingwave_component) (\n    (\n        process_resident_memory_bytes{namespace=\"$namespace\"}\n      * on (namespace, pod) group_left (node)\n        topk by (namespace, pod) (1, max by (namespace, pod, node) (kube_pod_info{node!=\"\"}))\n    )\n  * on (namespace, pod) group_left ()\n    topk by (namespace, pod) (\n      1,\n      max by (namespace, risingwave_component, pod) (up{risingwave_name=~\"$instance\"})\n    )\n)","format":"time_series","intervalFactor":2,"legendFormat":"{{ risingwave_component }}","refId":"A"}],"title":"Avg Memory (Component-Level)","type":"timeseries"},{"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineInterpolation":"linear","lineStyle":{"fill":"solid"},"lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[]},"unit":"percentunit"},"overrides":[]},"id":5,"links":[],"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom"},"tooltip":{"mode":"single","sort":"none"}},"span":[6],"targets":[{"expr":"max by (risingwave_component) (\n    (\n        rate(process_cpu_seconds_total{namespace=\"$namespace\"}[$__rate_interval])\n      * on (namespace, pod) group_left (node)\n        topk by (namespace, pod) (1, max by (namespace, pod, node) (kube_pod_info{node!=\"\"}))\n    )\n  * on (namespace, pod) group_left ()\n    topk by (namespace, pod) (\n      1,\n      max by (namespace, risingwave_component, pod) (up{risingwave_name=\"$instance\"})\n    )\n)","format":"time_series","intervalFactor":2,"legendFormat":"{{ risingwave_component }}","refId":"A"}],"title":"Max CPU (Component-Level)","type":"timeseries"},{"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineInterpolation":"linear","lineStyle":{"fill":"solid"},"lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[]},"unit":"decbytes"},"overrides":[]},"id":6,"links":[],"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom"},"tooltip":{"mode":"single","sort":"none"}},"span":[6],"targets":[{"expr":"max by (risingwave_component) (\n    (\n        process_resident_memory_bytes{namespace=\"$namespace\"}\n      * on (namespace, pod) group_left (node)\n        topk by (namespace, pod) (1, max by (namespace, pod, node) (kube_pod_info{node!=\"\"}))\n    )\n  * on (namespace, pod) group_left ()\n    topk by (namespace, pod) (\n      1,\n      max by (namespace, risingwave_component, pod) (up{risingwave_name=~\"$instance\"})\n    )\n)","format":"time_series","intervalFactor":2,"legendFormat":"{{ risingwave_component }}","refId":"A"}],"title":"Max Memory (Component-Level)","type":"timeseries"},{"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineInterpolation":"linear","lineStyle":{"fill":"solid"},"lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[]},"unit":"percentunit"},"overrides":[]},"id":7,"links":[],"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom"},"tooltip":{"mode":"single","sort":"none"}},"span":[6],"targets":[{"expr":"sum by (pod, risingwave_component, node) (\n    (\n        rate(process_cpu_seconds_total{namespace=\"$namespace\"}[$__rate_interval])\n      * on (namespace, pod) group_left (node)\n        topk by (namespace, pod) (1, max by (namespace, pod, node) (kube_pod_info{node!=\"\"}))\n    )\n  * on (namespace, pod) group_left ()\n    topk by (namespace, pod) (\n      1,\n      max by (namespace, risingwave_component, pod) (up{risingwave_name=\"$instance\"})\n    )\n)","format":"time_series","intervalFactor":2,"legendFormat":"{{ pod }} ({{ risingwave_component }}) @ {{ node }}","refId":"A"}],"title":"CPU (Pod-Level)","type":"timeseries"},{"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineInterpolation":"linear","lineStyle":{"fill":"solid"},"lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[]},"unit":"decbytes"},"overrides":[]},"id":8,"links":[],"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom"},"tooltip":{"mode":"single","sort":"none"}},"span":[6],"targets":[{"expr":"avg by (pod, risingwave_component, node) (\n    (\n        process_resident_memory_bytes{namespace=\"$namespace\"}\n      * on (namespace, pod) group_left (node)\n        topk by (namespace, pod) (1, max by (namespace, pod, node) (kube_pod_info{node!=\"\"}))\n    )\n  * on (namespace, pod) group_left ()\n    topk by (namespace, pod) (\n      1,\n      max by (namespace, risingwave_component, pod) (up{risingwave_name=~\"$instance\"})\n    )\n)","format":"time_series","intervalFactor":2,"legendFormat":"{{ pod }} ({{ risingwave_component }}) @ {{ node }}","refId":"A"}],"title":"Memory (Pod-Level)","type":"timeseries"}],"repeat":null,"repeatIteration":null,"repeatRowId":null,"showTitle":true,"title":"Resource Utilities","titleSize":"h6","type":"row"},{"collapse":true,"collapsed":true,"height":"300px","panels":[{"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineInterpolation":"linear","lineStyle":{"fill":"solid"},"lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[]},"unit":"decbytes"},"overrides":[]},"id":9,"links":[],"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom"},"tooltip":{"mode":"single","sort":"none"}},"span":[6],"targets":[{"expr":"sum by (risingwave_component) (\n  rate(object_store_read_bytes{namespace=\"$namespace\",risingwave_name=\"$instance\"}[$__rate_interval])\n)","format":"time_series","intervalFactor":2,"legendFormat":"{{ risingwave_component }}","refId":"A"}],"title":"Read Throughput (Component-Level)","type":"timeseries"},{"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineInterpolation":"linear","lineStyle":{"fill":"solid"},"lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[]},"unit":"decbytes"},"overrides":[]},"id":10,"links":[],"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom"},"tooltip":{"mode":"single","sort":"none"}},"span":[6],"targets":[{"expr":"sum by (risingwave_component) (\n  rate(object_store_write_bytes{namespace=\"$namespace\",risingwave_name=\"$instance\"}[$__rate_interval])\n)","format":"time_series","intervalFactor":2,"legendFormat":"{{ risingwave_component }}","refId":"A"}],"title":"Write Throughput (Component-Level)","type":"timeseries"},{"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineInterpolation":"linear","lineStyle":{"fill":"solid"},"lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[]},"unit":"decbytes"},"overrides":[]},"id":11,"links":[],"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom"},"tooltip":{"mode":"single","sort":"none"}},"span":[6],"targets":[{"expr":"sum by (risingwave_component, pod) (\n  rate(object_store_read_bytes{namespace=\"$namespace\",risingwave_name=\"$instance\"}[$__rate_interval])\n)","format":"time_series","intervalFactor":2,"legendFormat":"{{ pod }} ({{ risingwave_component }})","refId":"A"}],"title":"Read Throughput (Pod-Level)","type":"timeseries"},{"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineInterpolation":"linear","lineStyle":{"fill":"solid"},"lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[]},"unit":"decbytes"},"overrides":[]},"id":12,"links":[],"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom"},"tooltip":{"mode":"single","sort":"none"}},"span":[6],"targets":[{"expr":"sum by (risingwave_component, pod) (\n  rate(object_store_write_bytes{namespace=\"$namespace\",risingwave_name=\"$instance\"}[$__rate_interval])\n)","format":"time_series","intervalFactor":2,"legendFormat":"{{ pod }} ({{ risingwave_component }})","refId":"A"}],"title":"Write Throughput (Pod-Level)","type":"timeseries"}],"repeat":null,"repeatIteration":null,"repeatRowId":null,"showTitle":true,"title":"Object Store","titleSize":"h6","type":"row"},{"collapse":true,"collapsed":true,"height":"300px","panels":[{"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineInterpolation":"linear","lineStyle":{"fill":"solid"},"lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[]}},"overrides":[]},"id":13,"links":[],"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom"},"tooltip":{"mode":"single","sort":"none"}},"span":[6],"targets":[{"expr":"sum(storage_level_compact_frequency{namespace=\"$namespace\", risingwave_name=\"$instance\"}) by (result)","format":"time_series","intervalFactor":2,"legendFormat":"{{ result }}","refId":"A"}],"title":"Compaction Success & Failure Counts (Overview)","type":"timeseries"},{"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineInterpolation":"linear","lineStyle":{"fill":"solid"},"lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[]}},"overrides":[]},"id":14,"links":[],"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom"},"tooltip":{"mode":"single","sort":"none"}},"span":[6],"targets":[{"expr":"sum(storage_level_compact_frequency{namespace=\"$namespace\", risingwave_name=\"$instance\"}) by (pod, group, result)","format":"time_series","intervalFactor":2,"legendFormat":"{{ pod }} - group{{ group }} - {{ result }}","refId":"A"}],"title":"Compaction Success & Failure Counts (Detailed)","type":"timeseries"},{"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineInterpolation":"linear","lineStyle":{"fill":"solid"},"lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[]},"unit":"s"},"overrides":[]},"id":15,"links":[],"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom"},"tooltip":{"mode":"single","sort":"none"}},"span":[6],"targets":[{"expr":"histogram_quantile(1, sum by (le) (rate(state_store_compact_task_duration_bucket{namespace=\"$namespace\", risingwave_name=\"$instance\"}[$__rate_interval])))","format":"time_series","intervalFactor":2,"legendFormat":"overview","refId":"A"}],"title":"Longest Compaction Duration (Overview)","type":"timeseries"},{"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineInterpolation":"linear","lineStyle":{"fill":"solid"},"lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[]},"unit":"s"},"overrides":[]},"id":16,"links":[],"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom"},"tooltip":{"mode":"single","sort":"none"}},"span":[6],"targets":[{"expr":"histogram_quantile(1, sum by (pod, le) (rate(state_store_compact_task_duration_bucket{namespace=\"$namespace\", risingwave_name=\"$instance\"}[$__rate_interval])))","format":"time_series","intervalFactor":2,"legendFormat":"{{ pod }}","refId":"A"}],"title":"Longest Compaction Duration (Detailed)","type":"timeseries"},{"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineInterpolation":"linear","lineStyle":{"fill":"solid"},"lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[]},"unit":"s"},"overrides":[]},"id":17,"links":[],"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom"},"tooltip":{"mode":"single","sort":"none"}},"span":[6],"targets":[{"expr":"histogram_quantile(0.5, sum by (le) (rate(state_store_compact_task_duration_bucket{namespace=\"$namespace\", risingwave_name=\"$instance\"}[$__rate_interval])))","format":"time_series","intervalFactor":2,"legendFormat":"overview","refId":"A"}],"title":"Median Compaction Duration (Overview)","type":"timeseries"},{"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineInterpolation":"linear","lineStyle":{"fill":"solid"},"lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[]},"unit":"s"},"overrides":[]},"id":18,"links":[],"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom"},"tooltip":{"mode":"single","sort":"none"}},"span":[6],"targets":[{"expr":"histogram_quantile(0.5, sum by (pod, le) (rate(state_store_compact_task_duration_bucket{namespace=\"$namespace\", risingwave_name=\"$instance\"}[$__rate_interval])))","format":"time_series","intervalFactor":2,"legendFormat":"{{ pod }}","refId":"A"}],"title":"Median Compaction Duration (Detailed)","type":"timeseries"},{"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineInterpolation":"linear","lineStyle":{"fill":"solid"},"lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[]},"unit":"Bps"},"overrides":[]},"id":19,"links":[],"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom"},"tooltip":{"mode":"single","sort":"none"}},"span":[6],"targets":[{"expr":"sum(rate(storage_level_compact_write{namespace=\"$namespace\", risingwave_name=\"$instance\"}[$__rate_interval])) by(pod)","format":"time_series","intervalFactor":2,"legendFormat":"Rate of Writes ({{ pod }})","refId":"A"},{"expr":"sum by(pod) (\n  rate(storage_level_compact_read_next{namespace=\"$namespace\", risingwave_name=\"$instance\"}[$__rate_interval])\n) \n+ \nsum by(pod) (\n  rate(storage_level_compact_read_curr{namespace=\"$namespace\", risingwave_name=\"$instance\"}[$__rate_interval])\n)","format":"time_series","intervalFactor":2,"legendFormat":"Rate of Reads ({{ pod }})","refId":"B"}],"title":"Compaction Rate of Reading & Writing","type":"timeseries"},{"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineInterpolation":"linear","lineStyle":{"fill":"solid"},"lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[]},"unit":"decbytes"},"overrides":[]},"id":20,"links":[],"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom"},"tooltip":{"mode":"single","sort":"none"}},"span":[6],"targets":[{"expr":"sum(storage_level_total_file_size{namespace=\"$namespace\", risingwave_name=\"$instance\"}) by (pod, level_index)","format":"time_series","intervalFactor":2,"legendFormat":"{{ pod }} - {{ level_index }}","refId":"A"}],"title":"Sorted String Table File Sizes","type":"timeseries"}],"repeat":null,"repeatIteration":null,"repeatRowId":null,"showTitle":true,"title":"Compactor","titleSize":"h6","type":"row"}],"schemaVersion":14,"style":"dark","tags":["RisingWave","Streaming Database","RisingWave Labs"],"templating":{"list":[{"current":{"text":"Prometheus","value":"Prometheus"},"hide":1,"label":null,"name":"PROMETHEUS_DS","options":[],"query":"prometheus","refresh":1,"regex":"","type":"datasource"},{"allValue":null,"current":{},"datasource":"$PROMETHEUS_DS","hide":0,"includeAll":false,"label":"Namespace","multi":false,"name":"namespace","options":[],"query":"label_values(up{risingwave_name=~\".+\"}, namespace)","refresh":1,"regex":"","sort":0,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"allValue":null,"current":{},"datasource":"$PROMETHEUS_DS","hide":0,"includeAll":false,"label":"RisingWave","multi":false,"name":"instance","options":[],"query":"label_values(up{risingwave_name=~\".+\"}, risingwave_name)","refresh":1,"regex":"","sort":0,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false}]},"time":{"from":"now-1h","to":"now"},"timepicker":{"refresh_intervals":["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"],"time_options":["5m","15m","1h","6h","12h","24h","2d","7d","30d"]},"timezone":"browser","title":"RisingWave Overview","version":0}
